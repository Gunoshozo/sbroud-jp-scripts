import{a as St,c as Ft,d as jt,e as At}from"./chunk-EHQGE2HP.js";import{a as Nt}from"./chunk-A6DSVDJW.js";import{a as ei}from"./chunk-E2JLGW5A.js";import{a as Be,b as Et,c as xt}from"./chunk-M3MMNDIF.js";import{b as ht,c as W,d as F,e as be,g as Qt}from"./chunk-DUNI2MG6.js";import{$ as a,$a as q,Aa as it,Ab as we,B as se,Ba as j,C as G,Ca as A,Da as ot,Dc as Dt,Ea as S,Ec as U,F as ce,Fc as gt,Fe as Ue,G as de,Ga as Fe,Gc as Re,Hc as J,He as zt,I as Ye,Ic as wt,J as ue,K,Kd as ke,Ld as Pt,Le as Jt,M as qe,Ma as C,Md as Rt,N as Xe,Na as I,Nc as _t,Nd as Oe,O as ze,Oa as he,Od as $e,Pc as Tt,Pd as kt,Q as w,Qc as yt,Qd as Bt,R as Je,Rc as ye,Rd as $t,Sa as Y,Sc as Ce,Tc as Ct,Td as k,U as V,Ua as nt,Ud as Vt,V as et,Va as b,Vc as bt,Vd as Lt,W as le,Wa as N,Wd as Ve,X as tt,Xa as ve,Xd as Ut,Y as y,Ya as fe,Yd as Wt,Z as L,Za as rt,Zc as Ot,Zd as Zt,_,_a as me,_d as Gt,ab as X,bb as z,ca as ae,cb as De,ce as Kt,da as P,e as Z,ea as R,eb as ge,ee as Yt,f as ne,ga as He,h as Ge,i as Q,ib as p,ic as Ee,j as re,ja as T,ka as pe,ke as qt,l as M,lb as st,m as Me,mb as ct,md as It,nb as dt,ob as ut,oc as xe,od as je,pc as vt,pe as Xt,qb as lt,rd as Mt,sa as Se,t as $,ta as H,tc as Pe,td as f,ua as s,uc as _e,v as Ke,vc as ft,vd as Ae,wb as at,wc as mt,we as Le,xd as Ht,yc as Te,yd as Ne,zb as pt}from"./chunk-XP36KMKK.js";var Ai=(()=>{class t{constructor(e){this.tuiFocusVisibleChange=e}}return t.\u0275fac=function(e){return new(e||t)(s(Ae))},t.\u0275dir=a({type:t,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[p([f,Ae])]}),t})(),Ni=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=w({}),t})();var Ki=(()=>{class t{constructor({nativeElement:e},i){this.tuiFocusedChange=$(J(e,"focusin"),J(e,"focusout")).pipe(M(()=>gt(e)),Ye(!1),G(),de(1),_t(i))}}return t.\u0275fac=function(e){return new(e||t)(s(T),s(it))},t.\u0275dir=a({type:t,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),t})(),Yi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=w({}),t})();var ti=(()=>{class t{constructor(e,i){this.enabled$=new Z;let o=i.pipe(M(r=>!!r&&(!e||!r.length||r.every(c=>!e.contains(c)))));this.tuiObscured=this.enabled$.pipe(wt(()=>o))}set tuiObscuredEnabled(e){this.enabled$.next(e)}}return t.\u0275fac=function(e){return new(e||t)(s(F,8),s(Ne,2))},t.\u0275dir=a({type:t,selectors:[["","tuiObscured",""]],inputs:{tuiObscuredEnabled:"tuiObscuredEnabled"},outputs:{tuiObscured:"tuiObscured"},features:[p([Ne,Ht,f])]}),t})(),ii=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=w({}),t})();var vi=["*"];function fi(t,n){t&1&&he(0,"tui-scroll-controls",2)}var ni=(()=>{class t{constructor(e,i,o,r){this.cssRef=e,this.el=i,this.userAgent=o,this.isIos=r,this.isLegacy=!this.cssRef.supports("position","sticky")||ht(this.userAgent)&&!this.cssRef.supports("scrollbar-width","none"),this.hidden=!1,this.browserScrollRef=new T(this.el.nativeElement)}get delegated(){return this.browserScrollRef.nativeElement!==this.el.nativeElement}get showScrollbars(){return!this.hidden&&!this.isIos&&(!this.isLegacy||this.delegated)}get showNative(){return this.isLegacy&&!this.hidden&&!this.delegated}onScrollable(e){this.browserScrollRef.nativeElement=e}scrollIntoView(e){var i;if(this.delegated)return;let{nativeElement:o}=this.browserScrollRef,{offsetTop:r,offsetLeft:c}=mt(o,e),{clientHeight:l,clientWidth:v}=o,{offsetHeight:h,offsetWidth:O}=e,d=r+h/2-l/2,g=c+O/2-v/2;(i=o.scrollTo)===null||i===void 0||i.call(o,g,d)}}return t.\u0275fac=function(e){return new(e||t)(s(bt),s(T),s(Ot),s(je))},t.\u0275cmp=L({type:t,selectors:[["tui-scrollbar"]],hostVars:2,hostBindings:function(e,i){e&1&&b("tui-scrollable.stop",function(r){return i.onScrollable(r.detail)})("tui-scroll-into-view.stop",function(r){return i.scrollIntoView(r.detail)}),e&2&&Fe("_legacy",i.showNative)},inputs:{hidden:"hidden"},features:[p([{provide:Mt,deps:[t],useFactory:({browserScrollRef:n})=>n}])],ngContentSelectors:vi,decls:3,vars:3,consts:[["class","t-bars",4,"ngIf"],[1,"t-content"],[1,"t-bars"]],template:function(e,i){e&1&&(ve(),A(0,fi,1,0,"tui-scroll-controls",0),C(1,"div",1),fe(2),I()),e&2&&(S("ngIf",i.showScrollbars),H(),Fe("t-content_delegated",i.delegated))},dependencies:[St,at],styles:["[_nghost-%COMP%]{position:relative;display:flex;isolation:isolate;overflow:auto}[_nghost-%COMP%]:not(._legacy){scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%]:not(._legacy)::-webkit-scrollbar, [_nghost-%COMP%]:not(._legacy)::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}._legacy[_nghost-%COMP%]{overflow:overlay}@media all and (-webkit-min-device-pixel-ratio: 0) and (min-resolution: .001dpcm){._legacy[_nghost-%COMP%]::-webkit-scrollbar, ._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb{width:1rem;height:1rem;border-radius:6.25rem;background-clip:padding-box;border:.375rem solid transparent}._legacy[_nghost-%COMP%]::-webkit-scrollbar{background-color:transparent}._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--tui-clear-hover)}._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--tui-clear-active)}._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb:active{background-color:var(--tui-text-03)}}.t-content[_ngcontent-%COMP%]{isolation:isolate;flex:1;flex-basis:auto;width:100%;height:-webkit-max-content;height:max-content}.t-content_delegated[_ngcontent-%COMP%]{height:100%}.t-bars[_ngcontent-%COMP%]{color:var(--tui-text-01)}"],changeDetection:0}),t})(),ri=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=w({imports:[[we,Ft]]}),t})();var gi=t=>({$implicit:t});function wi(t,n){if(t&1&&(C(0,"div",4),De(1),I()),t&2){let e=n.polymorpheusOutlet;H(),ge(" ",e," ")}}var _i=vt(()=>bi),We=(()=>{class t{constructor(){this.tuiDropdownOpen=!1,this.tuiDropdownOpenChange=new pe}update(e){this.tuiDropdownOpen=e,this.tuiDropdownOpenChange.emit(e)}ngOnChanges(){var e;(e=this.dropdown)===null||e===void 0||e.toggle(this.tuiDropdownOpen)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a({type:t,selectors:[["","tuiDropdownOpen",""],["","tuiDropdownOpenChange",""]],inputs:{tuiDropdownOpen:"tuiDropdownOpen"},outputs:{tuiDropdownOpenChange:"tuiDropdownOpenChange"},features:[ae]}),t})(),E=(()=>{class t{constructor(e,i,o,r,c,l){this.el=i,this.dropdown=o,this.injector=r,this.dropdownService=c,this.open=l,this.refresh$=new Z,this.dropdownBoxRef=null,this.type="dropdown",this.component=new Tt(this.dropdown,this.injector),this.open&&!this.open.dropdown?this.open.dropdown=this:this.open=null,this.refresh$.pipe(Xe(0),K(e)).subscribe(()=>{var v,h;(v=this.dropdownBoxRef)===null||v===void 0||v.changeDetectorRef.detectChanges(),(h=this.dropdownBoxRef)===null||h===void 0||h.changeDetectorRef.markForCheck()})}get position(){return Gt(this.el.nativeElement)?"fixed":"absolute"}ngAfterViewChecked(){this.refresh$.next()}ngAfterViewInit(){this.open&&this.toggle(this.open.tuiDropdownOpen)}ngOnChanges(){this.content||this.toggle(!1)}ngOnDestroy(){this.toggle(!1),this.open&&(this.open.dropdown=void 0)}getClientRect(){return this.el.nativeElement.getBoundingClientRect()}toggle(e){var i,o;e&&this.content&&!this.dropdownBoxRef?(this.dropdownBoxRef=this.dropdownService.add(this.component),(i=this.open)===null||i===void 0||i.update(!0)):!e&&this.dropdownBoxRef&&(this.dropdownService.remove(this.dropdownBoxRef),this.dropdownBoxRef=null,(o=this.open)===null||o===void 0||o.update(!1))}}return t.\u0275fac=function(e){return new(e||t)(s(f,2),s(T),s(_i),s(tt),s(Nt),s(We,8))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdown","",5,"ng-container"]],inputs:{content:[y.None,"tuiDropdown","content"]},exportAs:["tuiDropdown"],features:[p([f,Zt(t),Bt(t)]),ae]}),Q([ke],t.prototype,"position",null),t})(),Ti={showDelay:200,hideDelay:500},yi=xe(Ti);var Ze=(()=>{class t extends Oe{constructor(e,i,o){super(r=>this.stream$.subscribe(r)),this.hovered$=e,this.options=i,this.parentHover=o,this.toggle$=new Z,this.stream$=$(this.toggle$,this.hovered$).pipe(ue(r=>re(r).pipe(se(r?this.showDelay:this.hideDelay))),qe(r=>{this.hovered=r}),ce()),this.showDelay=this.options.showDelay,this.hideDelay=this.options.hideDelay,this.hovered=!1,this.type="dropdown"}toggle(e){var i;(i=this.parentHover)===null||i===void 0||i.toggle(e),this.toggle$.next(e)}}return t.\u0275fac=function(e){return new(e||t)(s(Be),s(yi),s(t,12))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdownHover","",5,"ng-container"]],inputs:{showDelay:[y.None,"tuiDropdownShowDelay","showDelay"],hideDelay:[y.None,"tuiDropdownHideDelay","hideDelay"]},features:[p([$e(t),Be]),j]}),t})(),si={align:"left",direction:null,limitWidth:"auto",maxHeight:400,minHeight:80,offset:4,appearance:""},B=xe(si),tn=t=>({provide:B,deps:[[new V,Ci],[new V,new le,B]],useFactory:Yt(t,si)}),Ci=(()=>{class t{constructor(e){this.options=e,this.align=this.options.align,this.appearance=this.options.appearance,this.direction=this.options.direction,this.limitWidth=this.options.limitWidth,this.minHeight=this.options.minHeight,this.maxHeight=this.options.maxHeight,this.offset=this.options.offset}}return t.\u0275fac=function(e){return new(e||t)(s(B,4))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdownAlign",""],["","tuiDropdownAppearance",""],["","tuiDropdownDirection",""],["","tuiDropdownLimitWidth",""],["","tuiDropdownMinHeight",""],["","tuiDropdownMaxHeight",""],["","tuiDropdownOffset",""]],inputs:{align:[y.None,"tuiDropdownAlign","align"],appearance:[y.None,"tuiDropdownAppearance","appearance"],direction:[y.None,"tuiDropdownDirection","direction"],limitWidth:[y.None,"tuiDropdownLimitWidth","limitWidth"],minHeight:[y.None,"tuiDropdownMinHeight","minHeight"],maxHeight:[y.None,"tuiDropdownMaxHeight","maxHeight"],offset:[y.None,"tuiDropdownOffset","offset"]},features:[p([{provide:B,useExisting:ze(()=>t)}])]}),t})(),te=(()=>{class t extends k{constructor(e,i,o,r){super(),this.options=e,this.viewport=i,this.accessors=o,this.directive=r,this.type="dropdown"}getPosition({width:e,height:i}){var o,r;!e&&!i&&(this.previous=void 0);let c=(r=(o=this.accessor)===null||o===void 0?void 0:o.getClientRect())!==null&&r!==void 0?r:Ee,l=this.viewport.getClientRect(),{minHeight:v,align:h,direction:O,offset:d,limitWidth:g}=this.options,u={top:l.top-d,bottom:l.bottom+d,right:l.right-d,left:l.left+d},m=this.previous||O||"bottom",D={top:c.top-2*d-u.top,bottom:u.bottom-c.bottom-2*d},ie=g==="fixed"?c.width:e,x=Math.max(c.right-ie,d),Ie=c.left+e<u.right?c.left:x,oe={top:c.top-d-i,bottom:c.bottom+d,right:Math.max(u.left,x),center:c.left+c.width/2+e/2<u.right?c.left+c.width/2-e/2:x,left:Math.max(u.left,Ie)},Qe=D.top>D.bottom?"top":"bottom";return D[m]>v&&O||D[m]>i?[oe[m],oe[h]]:(this.previous=Qe,[oe[Qe],oe[h]])}get accessor(){return Wt("dropdown")(this.accessors,this.directive)}}return t.\u0275fac=function(e){return new(e||t)(s(B),s(Le),s(Ve),s(E))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdown",""]],features:[j]}),Q([ke],t.prototype,"accessor",null),t})(),bi=(()=>{class t{constructor(e,i,o,r,c,l,v,h,O,d,g){this.directive=r,this.animation=c,this.el=l,this.accessor=v,this.win=h,this.mode$=O,this.options=d,this.hoverDirective=g,i.pipe(M(u=>this.directive.position==="fixed"?e.correct(u):u),K(o)).subscribe(([u,m])=>{this.directive.el.nativeElement.isConnected?this.update(u,m):this.directive.toggle(!1)}),this.updateWidth(this.accessor.getClientRect().width)}onHoveredChange(e){var i;(i=this.hoverDirective)===null||i===void 0||i.toggle(e)}onTopFocus(){this.moveFocusOutside(!0)}onBottomFocus(){this.moveFocusOutside(!1)}update(e,i){var o;let{style:r}=this.el.nativeElement,{right:c}=this.el.nativeElement.getBoundingClientRect(),{maxHeight:l,minHeight:v,offset:h}=this.options,{innerHeight:O}=this.win,d=(o=this.el.nativeElement.offsetParent)===null||o===void 0?void 0:o.getBoundingClientRect(),{position:g}=this.directive,u=this.accessor.getClientRect(),m=g==="fixed"?0:-(d?.left||0),D=g==="fixed"?0:-(d?.top||0);e+=D,i+=m;let x=i<u.right&&c>u.left&&e<D+2*h?u.top-2*h:D+O-e-h,Ie=c<=u.left||i>=u.right;r.position=g,r.top=W(Math.max(e,D+h)),r.left=W(i),r.maxHeight=Ie?`${l}px`:W(Math.min(l,Math.max(x,v))),r.width="",r.minWidth="",this.updateWidth(u.width)}updateWidth(e){let{style:i}=this.el.nativeElement;switch(this.options.limitWidth){case"min":i.minWidth=W(e);break;case"fixed":i.width=W(e);break;case"auto":break}}moveFocusOutside(e){let{nativeElement:i}=this.directive.el,{ownerDocument:o}=i,r=o?o.body:i,c=U({initial:i,root:r,previous:e});for(;c!==null&&i.contains(c);)c=U({initial:c,root:r,previous:e});c?.focus()}}return t.\u0275fac=function(e){return new(e||t)(s(zt),s(Ue),s(f,2),s(E),s(qt),s(T),s(Ve),s(Ct),s(Xt),s(B),s(Ze,8))},t.\u0275cmp=L({type:t,selectors:[["tui-dropdown"]],hostVars:2,hostBindings:function(e,i){e&1&&b("$.data-mode.attr",function(){return i.mode$}),e&2&&(nt("@tuiDropdownAnimation",i.animation),ot("data-appearance",i.options.appearance))},features:[p([f,Ue,Vt("dropdown",te),Ut("dropdown",E),Jt])],decls:5,vars:4,consts:[["activeZone","tuiActiveZone"],["tuiActiveZone","","tuiOverscroll","all",1,"t-scroll",3,"tuiHoveredChange"],["tabindex","0",3,"focus"],["class","t-primitive",4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-primitive"]],template:function(e,i){if(e&1){let o=Y();C(0,"tui-scrollbar",1,0),b("tuiHoveredChange",function(c){return P(o),R(i.onHoveredChange(c))}),C(2,"div",2),b("focus",function(){return P(o),R(i.onTopFocus())}),I(),A(3,wi,2,1,"div",3),C(4,"div",2),b("focus",function(){return P(o),R(i.onBottomFocus())}),I()()}if(e&2){let o=z(1);H(3),S("polymorpheusOutlet",i.directive.content)("polymorpheusOutletContext",st(2,gi,o))}},dependencies:[ni,F,jt,Et,ye],styles:['[_nghost-%COMP%]{position:absolute;display:flex;box-shadow:var(--tui-shadow-dropdown);background:var(--tui-elevation-02);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-base-04);box-sizing:border-box;max-width:calc(100% - 8px);isolation:isolate;pointer-events:auto}.ng-animating[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%]:not([style*="top"]){visibility:hidden}[data-mode=onDark][_nghost-%COMP%]{--tui-text-01: var(--tui-text-01-night);--tui-clear: var(--tui-clear-inverse);background:#222;border:1px solid #808080}.t-scroll[_ngcontent-%COMP%]{flex-grow:1;max-width:100%}.t-primitive[_ngcontent-%COMP%]{padding:1rem}'],data:{animation:[Qt]}}),t})();var ci=(()=>{class t extends $t{constructor(e,i,o){super(e,i,o),this.type="dropdown"}}return t.\u0275fac=function(e){return new(e||t)(s(f,2),s(Oe),s(kt))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdown",""]],features:[p([f]),j]}),t})();var di=(()=>{class t extends Oe{constructor(){super(e=>this.stream$.subscribe(e)),this.stream$=new ne(!1),this.tuiDropdownManual=!1,this.type="dropdown"}ngOnChanges(){this.stream$.next(this.tuiDropdownManual)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a({type:t,selectors:[["","tuiDropdown","","tuiDropdownManual",""]],inputs:{tuiDropdownManual:"tuiDropdownManual"},features:[p([$e(t)]),j,ae]}),t})(),ui=(()=>{class t extends k{constructor(e,i,o){super(),this.options=e,this.viewport=i,this.vertical=o,this.previous=this.options.direction||"bottom",this.tuiDropdownSided="",this.tuiDropdownSidedOffset=4,this.type="dropdown"}getPosition(e){var i,o;if(this.tuiDropdownSided===!1)return this.vertical.getPosition(e);let{height:r,width:c}=e,l=(o=(i=this.vertical.accessor)===null||i===void 0?void 0:i.getClientRect())!==null&&o!==void 0?o:Ee,v=this.viewport.getClientRect(),{direction:h,minHeight:O,offset:d}=this.options,g=this.options.align==="center"?"left":this.options.align,u={top:l.bottom-v.top,left:l.left-d-v.left,right:v.right-l.right-d,bottom:v.bottom-l.top},m={top:l.bottom-r+this.tuiDropdownSidedOffset+1,left:l.left-c-d,right:l.right+d,bottom:l.top-this.tuiDropdownSidedOffset-1},D=u.top>u.bottom?"top":"bottom",ie=u.left>u.right?m.left:m.right,x=u[g]>c?m[g]:ie;return u[this.previous]>O&&h||this.previous===D?[m[this.previous],x]:(this.previous=D,[m[D],x])}}return t.\u0275fac=function(e){return new(e||t)(s(B),s(Le),s(te))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdownSided",""]],inputs:{tuiDropdownSided:"tuiDropdownSided",tuiDropdownSidedOffset:"tuiDropdownSidedOffset"},features:[p([te,Lt(t)]),j]}),t})();var li=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=w({imports:[[Ce,be,At,ri,xt]]}),t})();var Ii=["wrapper"],Mi=["*"],Hi=(t,n)=>({$implicit:t,close:n});function Si(t,n){if(t&1&&(C(0,"div",8),De(1),I()),t&2){let e=n.polymorpheusOutlet;H(),ge(" ",e," ")}}function Fi(t,n){if(t&1){let e=Y();C(0,"div",6,2),b("keydown",function(o){P(e);let r=N(2);return R(r.onKeydown(o))}),A(2,Si,2,1,"div",7),I(),he(3,"div")}if(t&2){N();let e=z(1),i=N();H(2),S("polymorpheusOutlet",i.content)("polymorpheusOutletContext",ct(2,Hi,e,i.close))}}function Ei(t,n){if(t&1){let e=Y();C(0,"div",4,0),b("tuiActiveZoneChange",function(o){P(e);let r=N();return R(r.onActiveZone(o))})("tuiObscured",function(o){P(e);let r=N();return R(r.onHostObscured(o))}),fe(2),A(3,Fi,4,5,"ng-template",5,1,lt),I()}if(t&2){let e=n.tuiLet,i=z(4),o=N();S("tuiDropdown",i)("tuiDropdownManual",e&&o.canOpen)("tuiDropdownSided",o.sided)("tuiObscuredEnabled",e),H(3),S("polymorpheus",o.context)}}var ai=(()=>{class t extends k{constructor(){super(...arguments),this.type="dummy"}getPosition(){return[0,0]}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=He(t)))(i||t)}})(),t.\u0275dir=a({type:t,selectors:[["","tuiAccessorProxy",""]],features:[p([{provide:k,multi:!0,deps:[[new V,new le,t],t],useFactory:(n,e)=>n||e}]),j]}),t})(),pi=new Je("[TUI_HOSTED_DROPDOWN_COMPONENT]"),xi=(()=>{class t{constructor(e,i,o,r){r?.tuiDropdownOpenChange.pipe(Ke(c=>c&&r.dropdown===o&&!i.focused),K(e)).subscribe(()=>{var c;(c=i.nativeFocusableElement)===null||c===void 0||c.focus(),i.updateOpen(!0)})}}return t.\u0275fac=function(e){return new(e||t)(s(f,2),s(pi),s(E,2),s(We,8))},t.\u0275dir=a({type:t,selectors:[["","tuiDropdownOpenMonitor",""]],features:[p([f])]}),t})(),Pi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a({type:t,selectors:[["","tuiHostedDropdownHost",""]]}),t})();function Ri(t){var n;return"key"in t&&t.key.toLowerCase()==="escape"&&this.canOpen&&this.open&&!(!((n=this.dropdown)===null||n===void 0)&&n.nextElementSibling)}var In=(()=>{class t{constructor(e,i){this.hover$=e,this.el=i,this.openChange$=new ne(!1),this.hostHover$=Me([J(this.el.nativeElement,"mouseover").pipe(M(o=>this.computedHost.contains(ft(o))),ue(o=>{var r,c;return re(o).pipe(se((o?(r=this.hover$)===null||r===void 0?void 0:r.showDelay:(c=this.hover$)===null||c===void 0?void 0:c.hideDelay)||0))})),this.hover$||Ge]).pipe(M(([o,r])=>o&&r)),this.sided=!1,this.canOpen=!0,this.open$=$(this.openChange$,this.hostHover$).pipe(de(1),G(),ce()),this.focusedChange=new pe,this.openChange=this.openChange$,this.close=()=>this.updateOpen(!1)}set open(e){this.openChange.next(e)}get open(){return this.openChange.value}get host(){var e;return((e=this.dropdownHost)===null||e===void 0?void 0:e.nativeElement)||this.el.nativeElement}get computedHost(){var e;return((e=this.dropdownHost)===null||e===void 0?void 0:e.nativeElement)||this.nativeFocusableElement||this.el.nativeElement}get dropdown(){var e,i;return(i=(e=this.dropdownDirective)===null||e===void 0?void 0:e.dropdownBoxRef)===null||i===void 0?void 0:i.location.nativeElement}get nativeFocusableElement(){return Dt(this.host)?this.host:U({initial:this.host,root:this.el.nativeElement})}get focused(){return Re(this.host)||this.open&&!!this.wrapper&&Re(this.wrapper.nativeElement)}onFocusInOut(){this.el.nativeElement.classList.toggle("_hosted_dropdown_focused",this.focused)}onFocusIn(e){this.computedHost.contains(e)||this.updateOpen(!1)}onClick(e){var i;!this.hostEditable&&this.computedHost.contains(e)&&!(!((i=this.hover$)===null||i===void 0)&&i.hovered)&&this.updateOpen(!this.open)}onKeyDownEsc(e){e.preventDefault(),this.closeDropdown()}onArrow(e,i){this.focusDropdown(e,i)}onKeydown({key:e,target:i,defaultPrevented:o}){!o&&Kt(e)&&this.hostEditable&&_e(i)&&!Te(i)&&this.focusHost()}onActiveZone(e){this.updateFocused(e),e||this.updateOpen(!1)}onHostObscured(e){e&&this.closeDropdown()}updateOpen(e){(!e||this.canOpen)&&(this.open=e)}get hostEditable(){return Te(this.computedHost)}focusDropdown(e,i){let o=this.nativeFocusableElement;if(!o||!_e(o)||!Pe(e.target)||!o.contains(e.target))return;if(!this.wrapper||!this.open||!this.dropdown||!_e(this.wrapper.nativeElement.nextElementSibling)){this.updateOpen(!0),Te(o)||e.preventDefault();return}let r=i?this.wrapper.nativeElement:this.wrapper.nativeElement.nextElementSibling,c=U({initial:r,root:this.wrapper.nativeElement,previous:!i});c&&(c.focus(),e.preventDefault())}closeDropdown(){this.focused&&this.focusHost(),this.updateOpen(!1)}focusHost(){let e=this.nativeFocusableElement;e&&e.focus({preventScroll:!0})}updateFocused(e){this.focusedChange.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(s(Ze,10),s(T))},t.\u0275cmp=L({type:t,selectors:[["tui-hosted-dropdown"]],contentQueries:function(e,i,o){if(e&1&&rt(o,Pi,5,T),e&2){let r;q(r=X())&&(i.dropdownHost=r.first)}},viewQuery:function(e,i){if(e&1&&(me(Ii,5,T),me(E,5),me(F,5)),e&2){let o;q(o=X())&&(i.wrapper=o.first),q(o=X())&&(i.dropdownDirective=o.first),q(o=X())&&(i.activeZone=o.first)}},hostBindings:function(e,i){e&1&&b("focusin.capture.silent",function(){return i.onFocusInOut()})("focusout.capture.silent",function(){return i.onFocusInOut()})("focusin",function(r){return i.onFocusIn(r.target)})("click",function(r){return i.onClick(r.target)})("keydown.silent.capture",function(r){return i.onKeyDownEsc(r)},!1,Se)("keydown.arrowDown",function(r){return i.onArrow(r,!0)})("keydown.arrowUp",function(r){return i.onArrow(r,!1)})},inputs:{content:"content",sided:"sided",canOpen:"canOpen",open:"open"},outputs:{open$:"openChange",focusedChange:"focusedChange"},features:[p([It(t),{provide:ai,deps:[[new V,new et,k]],useFactory:n=>n?.[0]},{provide:pi,useExisting:t}])],ngContentSelectors:Mi,decls:2,vars:3,consts:[["activeZone","tuiActiveZone"],["dropdown","polymorpheus"],["wrapper",""],["tuiAccessorProxy","","tuiDropdownOpenMonitor","","class","t-wrapper",3,"tuiDropdown","tuiDropdownManual","tuiDropdownSided","tuiObscuredEnabled","tuiActiveZoneChange","tuiObscured",4,"tuiLet"],["tuiAccessorProxy","","tuiDropdownOpenMonitor","",1,"t-wrapper",3,"tuiActiveZoneChange","tuiObscured","tuiDropdown","tuiDropdownManual","tuiDropdownSided","tuiObscuredEnabled"],[3,"polymorpheus"],[1,"t-dropdown",3,"keydown"],["class","t-primitive",4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-primitive"]],template:function(e,i){if(e&1&&(ve(),A(0,Ei,5,5,"div",3),dt(1,"async")),e&2){let o;S("tuiLet",(o=ut(1,1,i.open$))!==null&&o!==void 0?o:i.openChange.value)}},dependencies:[Pt,ai,xi,E,ci,te,di,ui,F,ti,yt,ye,pt],styles:["[_nghost-%COMP%]{display:inline-flex}.t-wrapper[_ngcontent-%COMP%]{border-radius:inherit;height:inherit;flex:1 1 auto;width:100%}.t-dropdown[_ngcontent-%COMP%]{height:100%}.t-primitive[_ngcontent-%COMP%]{padding:1rem}"],changeDetection:0}),Q([ei(Ri)],t.prototype,"onKeyDownEsc",null),t})(),Mn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=w({imports:[[we,Ce,Rt,ii,be,li]]}),t})();export{Ai as a,Ni as b,Ki as c,Yi as d,tn as e,In as f,Mn as g};
