import{b as H}from"./chunk-VDUGLGSV.js";import{a as C}from"./chunk-BCM33SBB.js";import{b}from"./chunk-OXKHSCUQ.js";import{a as T,b as w}from"./chunk-QVIGYHJL.js";import{Ae as R,Ea as h,J as u,M as n,Ma as S,Na as M,Oa as x,Oe as N,Pe as j,Qe as r,Z as g,jb as y,oa as f,p as l,ta as v,ua as o,x as d,ye as I}from"./chunk-XP36KMKK.js";var q=(()=>{let a=class a{constructor(t,e,i,p){this.route=t,this.router=e,this.apiService=i,this.gameRootService=p,this.text=""}ngOnInit(){window.scroll(0,0);let t=[this.route.paramMap];r.mapping||t.push(this.apiService.get("nameMapping").pipe(n(e=>{r.mapping=e}))),this.route.parent?.paramMap.pipe(d(t),u(e=>{let i=e[0].get("gameName")||"",p=e[1].get("mediaPage")||"";return l([this.apiService.get("supplementary",{pathParams:{gameName:i,page:p},requestOptions:{responseType:"text"}}).pipe(n(m=>{this.text=this.processText(m)})),this.apiService.get("gameConfig",{pathParams:{gameName:i}}).pipe(n(m=>{let c=m.find(k=>k.link.includes(this.router.url)),P=`${r.mapping[i]&&r.mapping[i]+" "||""}${c?c.name:""}`;this.gameRootService.pushHeader(P)}))])})).subscribe({next:()=>{},error:()=>{this.router.navigate(["/error"])}})}processText(t){let e=localStorage.getItem(j.sourceRepo)||N;return t.replaceAll("{assets}",`${e}`)}};a.\u0275fac=function(e){return new(e||a)(o(I),o(R),o(H),o(C))},a.\u0275cmp=g({type:a,selectors:[["supplementary"]],standalone:!0,features:[y],decls:5,vars:1,consts:[[1,"items-list_body"],[1,"items-list_scroll"],[1,"items-list_container","vw80","one-column"],[1,"additional-page_island"],[1,"additional-page_contents",3,"innerHtml"]],template:function(e,i){e&1&&(S(0,"div",0)(1,"div",1)(2,"div",2)(3,"tui-island",3),x(4,"div",4),M()()()()),e&2&&(v(4),h("innerHtml",i.text,f))},dependencies:[w,T,b],encapsulation:2});let s=a;return s})();export{q as SupplementaryPageComponent};
